# Project 5 - NYC Taxi Duration Prediction (KAGGLE)

## Оглавление  
[1. Описание проекта](README.md#Описание-проекта)  
[2. Какой кейс решаем?](README.md#Какой-кейс-решаем)  
[3. Краткая информация о данных](README.md#Краткая-информация-о-данных)  
[4. Этапы работы над проектом](README.md#Этапы-работы-над-проектом)  
[5. Результаты](README.md#Результаты)    

## Описание проекта    

Представьте вы заказываете такси из одной точки Нью-Йорка в другую, причем не обязательно конечная точка должна находиться в пределах города. Сколько вы должны будете за нее заплатить? Известно, что стоимость такси в США  рассчитывается на основе фиксированной ставки + тарифная стоимость, величина которой зависит от времени и расстояния. Тарифы варьируются в зависимости от города.

В свою очередь время поездки зависит от множества факторов таких как, откуда и куда вы едете, в какое время суток вы совершаете вашу поездку, погодных условий и так далее. 

Таким образом, если мы разработаем алгоритм, способный определять длительность поездки, мы сможем прогнозировать ее стоимость самым тривиальным образом, например, просто умножая стоимость на заданный тариф. 
Сервисы такси хранят огромные объёмы информации о поездках, включая такие данные как конечная, начальная точка маршрута, дата поездки и ее длительность. Эти данные можно использовать для того, чтобы прогнозировать длительность поездки в автоматическом режиме с привлечением искусственного интеллекта.

**Бизнес-задача:** определить характеристики и с их помощью спрогнозировать длительность поездки такси.


[к оглавлению](README.md#Оглавление)


## Какой кейс решаем?    

**Техническая задача как для специалиста в Data Science:** построить модель машинного обучения, которая на основе предложенных характеристик клиента будет предсказывать числовой признак - время поездки такси. То есть решить задачу регрессии.

**Основные цели проекта:**

1. Сформировать набор данных на основе нескольких источников информации
2. Спроектировать новые признаки с помощью Feature Engineering и выявить наиболее значимые при построении модели
3. Исследовать предоставленные данные и выявить закономерности
4. Построить несколько моделей и выбрать из них наилучшую по заданной метрике
5. Спроектировать процесс предсказания времени длительности поездки для новых данных

[к оглавлению](README.md#Оглавление)

## Краткая информация о данных

У нас есть данные о почти 1.5 миллионах поездок и 11 характеристиках, которые описывают каждую из поездок.

В данных есть столбцы, содержащие информацию о широте и долготе. Из них можно извлечь очень много полезной информации.
Например, зная широту и долготу начальной и конечной точек маршрута, мы можем воспользоваться OSRM API. Файлы с данными из OSRM для поездок - *osrm_data_train.csv, osrm_data_test.csv*

Зависимость длительности поездки от празничный день или будний нам поможет установить таблица с официальными праздниками и датами США - *holiday_data.csv*

Файл с данными о погоде - *weather_data.csv*

### Признаки

<div class="grey-container">
<p>Данные о клиенте и таксопарке:</p>
<ul style="list-style-type: square;">
<ul style="list-style-type: square;">
<li><span class="code-blue">id</span> — уникальный идентификатор поездки;</li>
<li><span class="code-blue">vendor_id</span> — уникальный идентификатор поставщика услуг (таксопарка), связанного с записью поездки.</li>
</ul>
</ul>
<p>Временные характеристики:</p>
<ul style="list-style-type: square;">
<ul style="list-style-type: square;">
<li><span class="code-blue">pickup_datetime</span> — дата и время, когда был включён счётчик поездки;</li>
<li><span class="code-blue">dropoff_datetime</span> — дата и время, когда счётчик был отключён.</li>
</ul>
</ul>
<p>Географическая информация:</p>
<ul style="list-style-type: square;">
<ul style="list-style-type: square;">
<li><span class="code-blue">pickup_longitude</span> — долгота, на которой был включён счётчик;</li>
<li><span class="code-blue">pickup_latitude</span> — широта, на которой был включён счётчик;</li>
<li><span class="code-blue">dropoff_longitude</span> — долгота, на которой счётчик был отключён;</li>
<li><span class="code-blue">dropoff_latitude</span> — широта, на которой счётчик был отключён.</li>
</ul>
</ul>
<p>Прочие признаки:</p>
<ul style="list-style-type: square;">
<ul style="list-style-type: square;">
<li><span class="code-blue">passenger_count</span> — количество пассажиров в транспортном средстве (введённое водителем значение);</li>
<li><span class="code-blue">store_and_fwd_flag</span> — флаг, который указывает, сохранилась ли запись о поездке в памяти транспортного средства перед отправкой поставщику (<span class="code-blue">Y</span> — хранить и пересылать, <span class="code-blue">N</span> — не хранить и не пересылать поездку).</li>
</ul>
</ul>
<p><strong>Целевой признак:</strong></p>
<ul style="list-style-type: square;">
<ul style="list-style-type: square;">
<li><span class="code-blue">trip_duration</span> — продолжительность поездки в секундах.</li>
</ul>
</ul>
</div>



[к оглавлению](README.md#Оглавление)


### Этапы работы над проектом  

Проект будет состоять из пяти частей:

1. Первичная обработка данных

2. Разведывательный анализ данных (EDA)

3. Отбор и преобразование признаков

4. Решение задачи регрессии: линейная регрессия и деревья решений

5. Решение задачи регрессии: ансамбли моделей и построение прогноза




[к оглавлению](README.md#Оглавление)

### Результаты

Результат ~ (в топ 19% соревнования) на KAGGLE.

Еще, на мой взгляд, модель можно было улучшить:
- поработать с аномалиями, например с помощью Isolation Forest
- попробовать другие scalers
- тонкой настройкой параметров
- разбить датасет на несколько, например, по признаку длительности поездки и расстояния и обучить по модели на каждый, так как зависисмости таргета от признака в этих группах немного различаются

[к оглавлению](README.md#Оглавление)


